# 2. 이상한 나라의 객체

## 객체지향과 인지 능력

* 객체지향을 직관적이고 이해하기 쉬운 패러다임이라고 하는 이유는 **객체지향이 세상을 자율적이고 독립적인 객체들로 분해**할 수 있는 인간의 기본적인 인지능력에 기반을 두고 있음.
* 인간이 지각할 수 있는 대부분의 객체는 물리적 경계를 지니고 있는 구체적 사물
* 객체지향 -> 새로운 세계를 창조하기위함.



## 객체, 그리고 이상한 나라

앨리스 객체: 키의 변화에 따른 위치의 변화에 초점

* 행동에 따라 상태가 달라짐.
  * 음료를 마시면 키가 변한다.
  * 문을 통과하면 위치가 변한다.

* 상태에 따라 행동의 결과가 달라짐.
  * 키에 따라 문을 통과할 수 있나 없나



* 앨리스는 상태를 가지고 상태는 변경이 가능하다.
* 상태를 변경시키는 것은 앨리스의 행동
  * 행동의 결과는 의존적이며 상태를 이용해 서술할 수 있다.
  * 행동의 순서가 결과에 영향
* 어떤 상태에 있더라도 유일하게 식별 가능.



## 객체, 그리고 소프트웨어 나라

객체의 다양한 특성을 효과적으로 설명하기 위해서 **상태**(state), **행동**(behavior), **식별자**(identity)를 지닌 실체

#### 이 책에서의 객체

* 식별 가능한 개체 또는 사물. (구체적 || 추상적)
* 식별자, 행동, 상태를 가진다.
* 저장된 상태와 실행가능한 코드를 통해 구현



#### 상태

* 객체가 주변 환경과의 상호작용에 어떻게 반응하는가는 그 시점까지 객체에 어떤 일이 발생했는가?

> ex) 비행기티켓 발권 상태, 자판기에 들어간 금액의 상태

* 행동의 결과(상태)는 과거에 어떤 행동들이 일어났는가에 의존

* **프로퍼티** : 객체의 상태를 표현하기 위한 중요한 수단
  * 숫자, 문자열, 양, 속도, 참/거짓 등
  * 정적
  * 프로퍼티 값(value): 동적
  * 단순값인 속성(attribute)와 다른 객체를 가리키는 링크(link) 두 종류의 조합
* 때로는 객체가 다른 객체의 상태를 바꿈
  * 앨리스의 음료수의 양이 바뀜
  * 객체간의 의미있는 연결은 링크라고 한다.



객체의 **상태**

* 특정 시점에 객체가 가지고 있는 정보의 집합 (구조적 특징)
* 정적 프로퍼티 / 동적 프로퍼티
* attribute / link



객체의 상태를 변경하거나 조회할 수 있는 방법 => **행동**

* 객체지향의 기본 사상은 상태와 상태를 조작하기 위한 행동을 하나의 단위로 묶는 것.
* 스스로의 행동에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성 유지.



#### 행동

* 객체의 상태 변경은 자발적인 행동 뿐

> 위치가 통로에서 변경 : 문을 통과함
>
> 행동에 따라 키와 위치 변경

객체에 의해 상태가 변경되는 것: **부수효과**(Side Effect)



상태와 행동 사이의 관계

* 객체의 행동은 상태와 영향
* 객체의 행동은 상태를 변경

행동의 관점

1. 상호작용이 현재의 상태에 어떤 방식으로 의존?
2. 상호작용이 어떻게 현재 상태 변경?



**협력과 행동**

협력의 유일한 방법은 객체 사이의 메세지 공유

객체가 협력에 참여하는 과정에서 자기 자신 뿐만 아니라 다른 객체의 상태도 변경

> 앨리스가 음료를 마시면 앨리스의 키 & 음료의 양 변화.

객체의 행동으로 인해 발생하는 결과

1. 객체 자신의 상태 변경
2. 행동 내에서 협력하는 다른 객체에 대한 메세지 전송



**행동**

* 외부의 요청 또는 수신된 메세지에 응답하기 위해 동작하고 반응하는 활동.
* 행동의 결과로 객체는 자신의 상태를 변경하거나 다른 객체에게 메세지를 전달.
* 객체는 행동을 통해 다른 객체와 협력에 참여하므로 행동은 외부에 가시적이어야 한다.



**캡슐화**

메세지 송신자는 수진자의 상태 변경에 대해서는 알지 못함.

* 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다.
* 객체를 외부로 노출하는 것은 행동 뿐, 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동.

상태를 외부에 노출시키지 않고 행동을 경계로 캡슐화 하는 것은 **객체의 자율성 증가**

자율성은 유연성과 간결성과 비례.



#### 상태를 행동 뒤로 캡슐화 하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게.



#### 식별자

* 객체를 서로 구별할 수 있는 <u>프로퍼티</u>

> 값은 식별자가 없고, 객체는 식별자가 있다.

**값**

* **값**은 변하지 않는 양을 모델링

> 변하지 않으므로 **불변상태(immutable state)**를 가진다고 말한다.

* **값**이 같은지 여부는 **상태**가 같은지 여부를 이용하여 판단.

* 값의 상태가 같으면 두 인스턴스는 동일한 것으로 판단.

> 두 값이 같은지 판단할 수 있는 성질을 **동등성(equality)**이라고 한다.

* 값은 오직 상태만을 이용해 동등성을 판단. -> 식별자 불필요



**객체**

* 시간에 따라 변경되는 상태를 포함, 행동을 통해 상태가 변함.

> **가변 상태(mutable state)**를 가진다고 한다.

* 두 객체가 같은지 다른지를 판단하는 프로퍼티 존재.

> 식별자를 기반으로 객체가 같은지 판단할 수 있는 성질을 **동일성(identical)**이라고 한다.



**참조객체, 엔티티**

* 식별자를 지닌 전통적인 의미의 객체

> 값 객체(value object): 식별자를 가지지 않는 객체

 

**객체의 특성**

* 객체는 상태를 가지고 상태는 변경이 가능하다.
* 상태를 변경시키는 것은 객체의 행동
  * 행동의 결과는 의존적이며 상태를 이용해 서술할 수 있다.
  * 행동의 순서가 결과에 영향
* 어떤 상태에 있더라도 유일하게 식별 가능.





## 행동이 상태를 결정한다

* 행동을 기준으로 객체를 설계해야 한다.
* 상태를 중심으로 설계할 경우
  * 상태를 먼저 결정할 경우 캡슐화가 저해됨.
  * 협력적이지 못한 객체를 만들 수 있다.
  * 재사용성 저해

* 객체 존재의 이유는 다른 객체와의 협력



## 은유와 객체

### 의인화(Anthropomorphism)

* 현실에서 수동적인 존재가 객체로 구현되면 능동적으로 변한다.

> ex) 이상한 나라의 트럼프 들



### 은유(metaphor)

* 현실 속의 객체의 의미 일부가 소프트 웨어로 전달.

> 전화기라는 이름의 객체는 소프트웨어 안에서 역할이 무엇인지 알 수 있음.

* 표현적 차이(representational gap) || 의미적 차이(semantic gap) 과의 관련성
  * 은유 관계에 있는 객체의 이름을 소프트웨어 객체의 이름으로 사용하면 표현적 차이를 줄여 소프트웨어의 구성을 쉽게 예측할 수 있다.
* 은유를 효과적으로 사용할 경우 표현적(의미적) 차이를 줄일 수 있고, 이해하기 쉽고 유지보수가 용이한 소프트웨어를 만들 수 있다.

