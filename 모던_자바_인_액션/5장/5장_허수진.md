## Ch5 스트림 활용

스트림 API가 지원하는 다양한 연산을 살펴보자

---

### 5.1.1 프레디케이트로 필터링

Filter 메서드를 지원한다. Filter 메서드는 프레디케이트(불리언을 반환) 를 인수로 받아서 프레디케이트와

일치하는 모든 요소를 포함하는 스트림을 반환한다.

```java
List<Dish> vegetatianMenu = menu.stream()
  													.filter(Dish::isVegetarian) // 채식인지 확인
  													.collect(toList())
```





### 5.1.2 고유 요소 필터링(중복 제거)

고유 요소로 이뤄진 스트림을 반환하는 `distinct` 메서드도 지원함(객체에 hashCode, equals 로 결정)

다음 코드는 리스트의 모든 짝수를 선택하고 중복을 필터링 함

```java
List<Integer> numbers = Arrays.asList(1, 2, 3, 3, 2, 4);
numbers.stream()
  		 .filter(i -> i % 2 ==0)
  		 .distinct()
       .forEachSystem.out::println();
```





### 5.2.1 프레디케이트를 이용한 슬라이싱

자바 9은 스트림 요소를 효과적으로 선택할 수 있도록 takeWhile, dropWhile 두 가지로 새로운 메서드를 지원한다. 

> ### TAKEWHILE && DORPWHILE
>
> ```java
> List<Dish> specialMenu = Arrays.asList(
> new Dish("seasonal",true, 300, Dish.Type.FISH)
> new Dish("a",true, 120, Dish.Type,OTHER),
> new Dish("a",true, 500, Dish.Type,MEAT)
> );
>  여기서 300 이하 칼로리를 가진 음식만 추출해보자
> //takeWhile 을 이용하면 무한 스트림을 포함한 모든 스트림에 프레디 케이트를 적용해 스트림을 슬라이스 할 수 있다. 
> List<Dish> filterMenu
>    = specialMenu.stream()
>    							.takeWhile(dish -> dish.getCalories() <320)
>                 .collect(toList());
> // 320 보다 큰 친구들을 모으려면
> List<Dish> filterMenu
>    = specialMenu.stream()
>    							.dropWhile(dish -> dish.getCalories() <320)
>                 .collect(toList());
> 
> 
> ```

### 5.3.1 스트림의 각 요소에 함수 적용하기

스트림은 함수를 인수로 받는 map 메서드를 지원함. 인수로 제공된 함수는  각 요소에 적용되며

함수를 적용한 결과가 새로운 요소로 매핑됨(이 과정은 기존의 값을 고친다 라는 개념보다 새로운 버전을 만든다가 더 어울림)

```java
List<String> dishNames = menu.stream()
  													 .map(Dish::getName)
  													 .collect(toList());
// getName 은 문자열을 반환하므로 map 메서드의 출력 스트림은 Stream<String> 형식을 갖음

```



만약에 `split("")` 을 사용하지 않고, 스트림 내에서 문자열을 각 알파벳으로 쪼개려면 어떻게 해야할까?

### flatMap 스트림 내 새로운 스트림을 만드는 방법

![스크린샷 2021-11-21 오후 5.37.43](/Users/sujinheo/Library/Application Support/typora-user-images/스크린샷 2021-11-21 오후 5.37.43.png)



### 검색과 매칭

특정 속성이 데이터 집합에 있는지 여부를 검색하는 데이터 처리도 자주 사용된다. 

`allMatch, anyMatch, noneMatch, findFirst, findAny` 등 다양한 유틸리티 메서드를 제공

위 연산은 모두 boolean 을 반환하므로 `최종 연산`이다. 

위에 연산은 쇼트 서킷이라고 부르기도 한다. 모든 스트림 요소를 돌지 않아도 결과를 반환할 수 있다.

무한한 요소를 가진 스트림 요소를 유한한 크기로 줄일 수 있는 유용한 연산이다. 



### 5.4.3 요소 검색

findAny 메서드는 현재 스트림에서 임의 요소를 반환한다.