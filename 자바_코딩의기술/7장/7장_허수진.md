## 07 객체 디자인

> 모든 문제는 간접 계층을 추가해 풀 수 있지만, 대부분 또 다른 문제를 양산한다.

집에 지붕과 창, 전기, 깨끗한 물이 있다고해서 꼭 살고싶은건 아니다. 보기도 좋아야하고

살기도 좋아야한다.  객체를 디자일 할 때 필요한 사소한 팁들을 적용한다. 



### 7-1 불 매개변수로 메서드 분할

만약 메서드가 boolean 타입의 매개 변수를 받아 동작한다면, 두개의 메서드로 분리 할 수 있다.



```java
void callPerson(boolean missedCall) {
  if(missedCall){
    call("person");
  }else{
    keepGoing("work");
  }
}

void call(String person){
  // 전화 거는 동작
}

void keepGoing(String work){
  // 일하는 동작
}
```



### 7-2 옵션 매개변수로 메서드 분할

null 값은 없애고 의도적으로 에러를 던저서 처리한다.



### 7-3 구체 타입보다 추상타입

제일 큰 추상 타입으로 선언해서 사용하면 변형 / 유지 보수에 유용하다.



### 7-4 가변 상태보다 불변 상태 사용하기

값 객체를 사용할 때는 불변을 위해 final 을 붙이도록 하자

```java
final class bank {
  final int number;
  final double balance;
}
```



### 7-5 상태와 동작 결합하기

상태와 동작이 분리되어 있으면 정보 은닉이 불가능해지고, 코드가 더 장황해진다.

따라서 상태와 동작이 하나로 결합해서 제공되어야 한다.

```java
class Hull {
  int holes;
  
  void repairHole() {
    if(isIntact()) {
      return;
    }
    holes--;
  }
  boolean isIntact(){
  	return holes == 0;
  }
  
}
```



### 7-6 참조 누수 피하기

방어 복사를 통해서 복사본을 만들어 제어해야한다.

Get 은 unmodifiableList(); 로 읽기만 가능하게 래핑해서 노출!

생성자는 매개변수 자체로 내 변수를 초기화 하는게 아니라, 내 변수로 생성 후 

초기화 해야함.



### 7-7 널 반환하지 않기

널 대신 옵셔널로 반환하자



### 내용 요약

전체를 더 낫게 만드는 세세한 변경들이 모여서 좋은 디자인을 만들어내고 그 방법은 클래스의 결함을 찾아내는 것이다. 화면에 보이는 수많은 코드를 모두 직접 작성하지는 않았을거다. 



코드 작성자가 어떤 근거로 디자인 결정을 내렸는지 알아내는데 많은 노력을 기울이자