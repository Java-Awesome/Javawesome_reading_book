## 실전 준비

### 정적 코드 분석 도구

**정적 코드 분석 도구**는 컴파일 오류와 기능적 오류를 넘어서는 특정 유형의 문제를 코드에서 자동으로 감지하고, 수정을 도와주는 도구도 있다.

intelij -> Code Inspection

여러 도구 중 하나를 적용해야 고품질로 유지보수 하기 쉬움.

### 팀 내 자바 포맷 통일

대부분 프로그래머는 팀으로 일한다.

Scrum 이나 xp 같은 애자일 프로세스가 방법을 알려준다.

코드에 영향을 미치는 팀 요구사항인 서식화 때문이다.

코드 행의 길이도 논쟁 대상. 일관된 서식화에 동의해야한다.

업계 표준 --> 구글 자바 포맷



### 빌드 자동화

모든 시스템에서 같은 방식으로 동작하면서 개발자 장비와 독립적인 정교한 빌드도구나 언어로 빌드를 자동하 하는 것. 그레이들 같은 도구로

빌드를 자동화 하기 위해서는 빌드 파일을 작성해 프로젝트에 넣어야 한다. 빌드 파일은 빌드 도구 별로 특수한 문법을 사용하고 파일 내에 소스 코드가 어디에 있는지, 종속성과 외부 라이브러리는 무엇인지, 성공적으로 빌드하려면 그 밖에 무엇을 해야하는지 설명한다. 

이어서 빌드 도구는 파일을 해석하고 필요한 외부 라이브러리를 다운로드하고 모든 테스트를 실행하고 테스트에 성공하면 실행 파일을 빌드한다.



### 지속적 통합

광범위한 테스트와 통합, 코드품질 검증 등 모든 과정을 지속적 통합 서버라는 전용장비에 위탁. 버전제어 시스템에 커밋할 때 마다 전용 서버가 코드를 모두 가져와 전체 테스트를 실행하고 완벽히 통합된 실행파일을 빌드한다.

젠킨스.



### 생산 준비와 납품

고객은 지금까지 테스트 되지 않았던 수많은 방법으로 소프트웨어를 사용하므로 요청 지연과 오류, 예상하지 못한 동작이 쇄도한다. 

로그를 저장하고 분석, 수치계산 후 시각화.

생산에서 발견되는 오류는 모두 모으고 추적해야 한다.

한 줄이라도 변경이 발생하면 지속적인 통합이 힘을 발휘한다.



### 콘솔 출력 대신 로깅

```java
class LaunchChecklist {
  
  private static final Logger LOGGER = LogManger.getLogger(LaunchChecklist.class)
    
}
```

문자열 연산은 비용이 크다. 로그를 통해 

1. 명령문이 언제 출력되는지
2. 출력하는 코드 행 수
3. 메서드 매개변수의 값
4. 출력된 명령문의 중요도가 모두 같은지

를 알 수 있다.

**Log4j** 가 가장 널리 쓰이는 프레임워크이다.



### 9-7 다중 스레드 코드 최소화 및 독립 

동시실행을 어렵다.

테스트와 정적 분석도 좋지 못하다.

코드리뷰가 더 도움이 된다.

때이른 최적화와 다중 스레드 코딩은 하지 말자. 성능이 너무 안나올 때에만.

훌륭한 구조화가 필요하다. 최소한의 부분에만 하자.



### 고급 동시 실행 추상화 사용하기 

대부분 프로그램을 다중 스레드로 만들어야한다.

웹 어플리케이션은 동시에 여러 사용자를 처리해야하기에

화면간 상호작용은 UI 스레드로, 계산 집약적 작업읍 백그라운드 스레드로

전형적으로 메모리를 통해 스레드 간 커뮤니케이션을 수행한다. 

자바는 volatile synchronized 와 같은 키워드로 동기화 영역을 지원하고 있다.

이러한 클래스를 올바르게 사용하려면 자바 메모리 모델과 모델 내 상태변경간 전후 관계가 어떻게 동작하는지 완벽히 이해해야한다. 

책 추천 <자바 동시 실행 실전> <JVM에서 동시 실행 프로그래밍>



### 프로그램 속도 향상

```java
class Inventory {
  List<s> s;
  
  long countDifferentKinds(){
    return s.stream()
      // .sequential() // 순차적. 생략가능
      .parallel() 
      .filter()
      .map(Supply::getName)
      .distinct()
      .count();
  }
}
```

스트림은 병렬화를 쉽게 할 수 있게해준다.



### 틀린 가정 알기

이론상으로는 괜찮을지 모르지만 실제로 종종 프로그램을 고장내곤 한다.

현실 세계에 맞도록 코드를 준비하려면 순전히 가정만으로 코드가 이끌려가기 전에 항상 한 번 더 생각하자.